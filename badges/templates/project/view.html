{% extends 'base.html' %}
{% load i18n %}
{% load humanize %}

{% block body %}
    <div class="container">
        <div class="row">
            <div class="span12">
                <h2>{% blocktrans with badge_title=badge.title %}Project submitted for
                    {{ badge_title }}{% endblocktrans %}</h2>
            </div>
        </div>
        <div>
            <p>Badge for the Project</p>
            {% include 'badge/badge_info.html' %}
        </div>

            <div class="row">
                <div class="span12">
                    <h2>{% blocktrans with username=project.author.username %}Version 1 submitted by
                        {{ username }} {% endblocktrans %}</h2>
                </div>
            </div>

            <div class="row">
                <div class="span4">
                    <img src="{{ project.image.url }}"/>
                </div>
                <div class="span8">
                    <dl>
                        <dt>{% trans 'Title' %}</dt>
                        <dd>{{ project.title }}</dd>
                    </dl>
                    <dl>
                        <dt>{% trans 'Url' %}</dt>
                        <dd><a href="{{ project.work_url }}">{{ project.work_url }}</a></dd>
                    </dl>
                    <dl>
                        <dt>{% trans 'Steps taken' %}</dt>
                        <dd>{{ project.description }}</dd>
                    </dl>
                </div>
            </div>

            <div class="row">
              <div class="span12">
                <div class="pull-left">
                    <a href="https://twitter.com/share" class="twitter-share-button" data-via="p2pu" data-size="large" data-hashtags="p2pu">Tweet</a>
                    <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>
                </div>
                <div class="pull-left">
                <!-- Place this tag where you want the share button to render. -->
                    <div class="g-plus" data-action="share" data-annotation="bubble" data-height="24"></div>

                    <!-- Place this tag after the last share tag. -->
                    <script type="text/javascript">
                      (function() {
                          var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;
                          po.src = 'https://apis.google.com/js/plusone.js';
                          var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
                      })();
                    </script>
                </div>
              </div>
            </div>

            <div class="row">
              <div class="span12">
                 <h2>{% trans 'Lessons learned' %}</h2>
                 <p>{{ project.reflection }}</p>
              </div>
            </div>
            

            {% for fb in feedback %}
                <div class="row">
                    <div class="span12">
                        {% if fb.improvement %}
                            <h2>{% blocktrans with date=fb.date_created|naturaltime %}Project revision on
                                {{ date }}{% endblocktrans %}</h2>
                            <h3>{% trans 'Improvements made' %}</h3>
                            <p>{{ fb.improvement }}</p>
                            {% if fb.work_url %}
                                <h3>{% trans 'New URL' %}</h3>
                                <a href={{ fb.work_url }}>{{ fb.work_url }}</a>
                            {% endif %}
                        {% else %}
                            <h2>{% blocktrans with username=fb.expert.username %}Feedback by {{ username }}{% endblocktrans %}</h2>
                            <img src="{{ fb.expert.image_url }}" alt="{{ fb.expert.username }}">
                            <h3>{% trans 'Green' %}</h3>
                            <p>{{ fb.good }}</p>
                            <h3>{% trans 'Yellow' %}</h3>
                            <p>{{ fb.bad }}</p>
                            <h3>{% trans 'Red' %}</h3>
                            <p>{{ fb.ugly }}</p>
                        {% endif %}
                    </div>
                </div>
            {% endfor %}

            <div class="row">
                <div class="">
                    {% if can_give_feedback %}
                        <a href="{% url project_feedback project.id %}"
                           class="btn btn-large pull-right">{% trans 'Give feedback' %}</a>
                    {% endif %}
                    {% if can_revise %}
                        <a href="{% url project_revise project.id %}"
                           class="btn btn-large pull-right">{% trans 'Revise project' %}</a>
                    {% endif %}
                </div>
            </div>
        </div>

{% endblock %}
