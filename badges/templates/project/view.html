{% extends 'base.html' %}
{% load i18n %}
{% load humanize %}

{% block body %}
    <div class="container project-view">
        <div class="row">
            <div class="span12">
                <h2>{% blocktrans with badge_title=badge.title %}Project submited for
                    {{ badge_title }}{% endblocktrans %}</h2>
            </div>
        </div>
        <div>
            <p>Badge for the Project</p>
            <a href="{% url badge_view badge.id %}">
               {% include 'badge/badge_info.html' %}
            </a>
        </div>

            <div class="row">
                <div class="span12">
                    <h2>{% blocktrans with username=project.author.username %}Version 1 submited by
                        {{ username }} {% endblocktrans %}</h2>
                </div>
            </div>

            <div class="row">
                <div class="span4">
                    <img src="{{ project.image.url }}"/>
                </div>
                <div class="span8">
                    <dl>
                        <dt>{% trans 'Title' %}</dt>
                        <dd>{{ project.title }}</dd>
                    </dl>
                    <dl>
                        <dt>{% trans 'Url' %}</dt>
                        <dd><a href="{{ project.work_url }}">{{ project.work_url }}</a></dd>
                    </dl>
                    <dl>
                        <dt>{% trans 'Steps taken' %}</dt>
                        <dd>{{ project.description }}</dd>
                    </dl>
                </div>
            </div>

            <div class="row">
              <div class="span12">
                <div class="pull-left">
                    <a href="https://twitter.com/share" class="twitter-share-button" data-via="p2pu" data-size="large" data-hashtags="p2pu">Tweet</a>
                    <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>
                </div>
                <div class="pull-left">
                <!-- Place this tag where you want the share button to render. -->
                    <div class="g-plus" data-action="share" data-annotation="bubble" data-height="24"></div>

                    <!-- Place this tag after the last share tag. -->
                    <script type="text/javascript">
                      (function() {
                          var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;
                          po.src = 'https://apis.google.com/js/plusone.js';
                          var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
                      })();
                    </script>
                </div>
              </div>
            </div>

            <div class="row">
              <div class="span12">
                 <h2>{% trans 'Lessons learned' %}</h2>
                 <p>{{ project.reflection }}</p>
              </div>
            </div>
            

            {% for fb in feedback %}
                <div class="row">
                    <div class="span12 feedback">
                        {% if fb.improvement %}
                            <h4>
                                {% blocktrans with date=fb.date_created|naturaltime %}
                                    Project revision on {{ date }}
                                {% endblocktrans %}
                            </h4>
                            <div class="feedback-labels alert alert-revise">
                                {% trans 'Improvements made' %}
                            </div>
                            <p class="feedback-content span6 content-blue">
                                {{ fb.improvement }}
                            </p>

                            {% if fb.work_url %}
                                <div class="feedback-labels alert alert-revise">{% trans 'New URL' %}</div>
                                <p class="feedback-content span6 content-blue">
                                    <a href={{ fb.work_url }}>{{ fb.work_url }}</a>
                                </p>

                            {% endif %}
                        {% else %}
                            <div class="feedback-head clearfix">
                                <div class="span6">
                                    <h4 class="pull-left">
                                        {% blocktrans with username=fb.expert.username %}Feedback by {{ username }}{% endblocktrans %}
                                    </h4>
                                    <a href="{% url dashboard fb.expert.username %}"><img src="{{ fb.expert.image_url }}" alt="{{ fb.expert.username }}"
                                         class="thumbnail pull-right"></a>
                                </div>
                            </div>

                            <div class="feedback-labels alert alert-success">
                                {% trans 'Green' %}
                            </div>
                            <p class="feedback-content span6 content-green">
                                {{ fb.good }}
                            </p>
                            <div class="feedback-labels alert alert-warning">
                                {% trans 'Yellow' %}
                            </div>
                            <p class="feedback-content content-yellow span6">
                                {{ fb.bad }}
                            </p>
                            <div class="feedback-labels alert alert-error">
                                {% trans 'Red' %}
                            </div>
                            <p class="feedback-content content-red span6">
                                {{ fb.ugly }}
                            </p>
                        {% endif %}
                    </div>
                </div>
            {% endfor %}
            <div class="feedback-give-revise">
                {% if can_give_feedback %}
                    <a href="{% url project_feedback project.id %}"
                       class="btn btn-large btn-cyan">{% trans 'Give feedback' %}</a>
                {% endif %}
                {% if can_revise %}
                    <a href="{% url project_revise project.id %}"
                       class="btn btn-large btn-cyan">{% trans 'Revise project' %}</a>
                {% endif %}
            </div>
        </div>
{% endblock %}
